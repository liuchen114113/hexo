---
title: 浏览器工作机制
date: 2020-01-20 20:17:16
tags:
---

## 进程和线程
![进程和线程](/images/xiancheng.jpg)

## 哪些进程？
浏览器包括4个进程
![进程](/images/brower.jpg)

## 多进程优势
- 避免单个页⾯崩溃，影响整个浏览器
- 避免插件崩溃，影响整个浏览器
- 多进程充分利⽤多核优势

对于前端来说最重要的进程是：渲染进程，牢记：渲染进程是多线程的。

## 渲染进程有那些线程
![线程](/images/11.jpg)

## ⼀道经典⾯试题
输⼊⼀个url后 ——> 浏览器主进程接管，开⼀个下载进程 ——> ⼀系列http请求（DNS解析等）
——> 拿到返回内容后交给浏览器内核 ——>  浏览器渲染流程开始
![渲染](/images/xuanran.jpg)

## 硬件加速
硬件渲染 WebKit 会依据指定条件决定将那些 RenderLayer 对象组合在⼀起形成⼀个新层并缓存在 
GPU，这些新层我们统称为合成层（Compositing Layer）。这些合成层提升成独⽴的层，被独⽴出
来之后，便不会再影响其他 dom 的布局。如果发⽣ 偏移、透明度等等变换 GPU 要做的只是把更新
的合成层进⾏相应的变换并送⼊ Compositor 重新合成即可，利⽤这个优点我们可以把页⾯中⼀些布
局经常变换的 dom 提升到独⽴的层。

## 宏任务和微任务
#### 宏任务：
每次执⾏栈执⾏的任务就是⼀个宏任务 每个宏任务结束以后，下⼀个宏任务开始前，会重新渲染页⾯
#### 微任务：
在当前宏任务后，下⼀个宏任务前，渲染前，执⾏多了⼀个微任务队列，某⼀个宏任务执⾏后，在此期
间内产⽣的所有微任务都会执⾏完毕
